**Please strictly follow the guidelines below**

## Codebase Analysis

### Task Summary

{summary}

### Solution Concept

{initialConcept}

## Focus-Specific Analysis Approach

### üî¨ Logic Mode Analysis
- Analyze architectural patterns and code structure
- Identify reusable components and utilities
- Evaluate data flow and state management
- Check for existing similar implementations
- Consider testing implications

### üé® Vibe Mode Analysis
- Review existing design patterns and styles
- Identify UI component library usage
- Analyze animation and transition patterns
- Check responsive design approaches
- Look for design tokens and theming

### üîí Security Mode Analysis
- Map authentication/authorization flows
- Identify sensitive data handling
- Review input validation patterns
- Check for security middleware/guards
- Analyze audit logging implementation

### ‚ö° Performance Mode Analysis
- Profile existing performance characteristics
- Identify current bottlenecks
- Review caching strategies in use
- Check database query patterns
- Analyze bundle size and loading

### ‚ôø Accessibility Mode Analysis
- Review existing ARIA usage
- Check keyboard navigation patterns
- Analyze screen reader compatibility
- Review color contrast compliance
- Check focus management patterns

## Technical Review Points

Pay attention to opportunities for code reuse, avoid reimplementing existing functionality, and mitigate technical debt risks.

### 1. Codebase Analysis

- Look for reusable components and similar implementations
- Determine the appropriate location for the new functionality
- Evaluate integration methods with existing modules

### 2. Technical Strategy Evaluation

- Consider modularity and scalability in the design
- Assess the future compatibility of the proposal
- Plan testing strategies and coverage

### 3. Risk and Quality Analysis

- Identify technical debt and performance bottlenecks
- Evaluate security and data integrity
- Check error handling mechanisms

### 4. Implementation Recommendations

- Follow project architectural style
- Recommend implementation methods and technology choices
- Propose clear development steps

{previousAnalysis}

## üí° Smart Tool Suggestions

Use these tools if available to enhance your analysis:

### For Complex Decisions
- **Primary**: Use `decisionframework` (Clear Thoughts MCP) when evaluating multiple architectural options or technology choices
- **Fallback**: Create a comparison table with pros/cons, constraints, and make a weighted recommendation

### For Deep Research
- **Primary**: Use `perplexity_ask` to get synthesized answers about design patterns, best practices, or technology comparisons
- **Fallback**: Search the codebase for similar patterns, check project documentation, or ask the user for guidance

### For Mental Models
- **Primary**: Use `mentalmodel` (Clear Thoughts MCP) with modes like `first_principles` or `opportunity_cost` for complex analysis
- **Fallback**: Apply the thinking framework manually in your analysis by asking "Why?" repeatedly or considering trade-offs explicitly

> ‚ö†Ô∏è **Note**: These tools are optional. If unavailable, use the fallback approach and proceed with your analysis.

## Next Actions

After completing the analysis, use the "reflect_task" tool to submit the final analysis, including:

1. **Original Task Summary** - Keep consistent with the first stage
2. **Complete Analysis Results** - Technical details, interface dependencies, implementation strategy, acceptance criteria

Your analysis will determine the quality of the solution. Please comprehensively consider various technical factors and business constraints.
**Using tools is strictly required.**
